<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fallacy Quiz - Test Your Critical Thinking | VideoBate</title>
  <meta name="description" content="Interactive quiz to test your ability to spot logical fallacies. Train your critical thinking skills!">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ§ </text></svg>">
  <style>
    :root {
      --bg-dark: #0f0f14;
      --bg-card: #1a1a24;
      --bg-hover: #252535;
      --text-primary: #ffffff;
      --text-secondary: #a0a0b0;
      --accent-red: #ef4444;
      --accent-gold: #ffd700;
      --accent-cyan: #00d4ff;
      --accent-green: #22c55e;
      --accent-purple: #8b5cf6;
      --accent-orange: #f97316;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }
    
    .container { max-width: 900px; margin: 0 auto; padding: 20px; }
    
    /* Header */
    .header {
      text-align: center;
      padding: 40px 20px;
      background: linear-gradient(180deg, rgba(139,92,246,0.1) 0%, transparent 100%);
    }
    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    .header h1 span {
      background: linear-gradient(135deg, var(--accent-gold), var(--accent-red));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .header p {
      color: var(--text-secondary);
      font-size: 1.1rem;
    }
    
    /* Stats Bar */
    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 30px;
      padding: 20px;
      background: var(--bg-card);
      border-radius: 12px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    .stat {
      text-align: center;
    }
    .stat-value {
      font-size: 2rem;
      font-weight: 800;
      color: var(--accent-gold);
    }
    .stat-value.correct { color: var(--accent-green); }
    .stat-value.wrong { color: var(--accent-red); }
    .stat-value.streak { color: var(--accent-cyan); }
    .stat-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
    }
    
    /* Mode Selection */
    .mode-select {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    .mode-btn {
      padding: 12px 24px;
      border: 2px solid rgba(255,255,255,0.1);
      background: var(--bg-card);
      color: var(--text-secondary);
      border-radius: 10px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s;
    }
    .mode-btn:hover {
      border-color: var(--accent-purple);
      color: var(--text-primary);
    }
    .mode-btn.active {
      border-color: var(--accent-gold);
      background: rgba(255,215,0,0.1);
      color: var(--accent-gold);
    }
    
    /* Quiz Card */
    .quiz-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 20px;
      border: 1px solid rgba(255,255,255,0.05);
    }
    
    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .question-number {
      background: var(--accent-purple);
      color: white;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
    }
    .difficulty {
      padding: 6px 12px;
      border-radius: 15px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    .difficulty.easy { background: rgba(34,197,94,0.2); color: var(--accent-green); }
    .difficulty.medium { background: rgba(255,215,0,0.2); color: var(--accent-gold); }
    .difficulty.hard { background: rgba(239,68,68,0.2); color: var(--accent-red); }
    
    .scenario {
      background: var(--bg-dark);
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 25px;
      border-left: 4px solid var(--accent-purple);
    }
    .scenario-label {
      font-size: 0.85rem;
      color: var(--accent-purple);
      margin-bottom: 10px;
      font-weight: 600;
    }
    .scenario-text {
      font-size: 1.15rem;
      line-height: 1.7;
      color: var(--text-primary);
    }
    .scenario-speaker {
      color: var(--accent-cyan);
      font-weight: 600;
    }
    
    .question-prompt {
      font-size: 1.1rem;
      margin-bottom: 20px;
      color: var(--text-secondary);
    }
    
    /* Answer Options */
    .options {
      display: grid;
      gap: 12px;
    }
    .option {
      padding: 16px 20px;
      background: var(--bg-dark);
      border: 2px solid rgba(255,255,255,0.08);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .option:hover:not(.disabled) {
      border-color: var(--accent-purple);
      background: var(--bg-hover);
    }
    .option.selected {
      border-color: var(--accent-cyan);
      background: rgba(0,212,255,0.1);
    }
    .option.correct {
      border-color: var(--accent-green);
      background: rgba(34,197,94,0.15);
    }
    .option.wrong {
      border-color: var(--accent-red);
      background: rgba(239,68,68,0.15);
    }
    .option.disabled {
      cursor: default;
      opacity: 0.7;
    }
    .option-letter {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      flex-shrink: 0;
    }
    .option.correct .option-letter {
      background: var(--accent-green);
      color: white;
    }
    .option.wrong .option-letter {
      background: var(--accent-red);
      color: white;
    }
    .option-text {
      flex: 1;
    }
    .option-code {
      font-family: monospace;
      font-size: 0.8rem;
      color: var(--text-secondary);
      background: rgba(0,0,0,0.3);
      padding: 2px 8px;
      border-radius: 4px;
    }
    
    /* Explanation */
    .explanation {
      margin-top: 25px;
      padding: 20px;
      background: rgba(139,92,246,0.1);
      border-radius: 12px;
      border: 1px solid rgba(139,92,246,0.3);
      display: none;
    }
    .explanation.show { display: block; }
    .explanation h4 {
      color: var(--accent-purple);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .explanation p {
      color: var(--text-secondary);
      line-height: 1.7;
    }
    .explanation .ascii-preview {
      background: #000;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      font-family: 'Courier New', monospace;
      font-size: 11px;
      color: var(--accent-cyan);
      white-space: pre;
      overflow-x: auto;
    }
    
    /* Buttons */
    .btn-row {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 25px;
    }
    .btn {
      padding: 14px 32px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
    }
    .btn-primary {
      background: var(--accent-gold);
      color: #000;
    }
    .btn-primary:hover {
      background: #ffed4a;
      transform: translateY(-2px);
    }
    .btn-primary:disabled {
      background: #666;
      color: #999;
      cursor: not-allowed;
      transform: none;
    }
    .btn-secondary {
      background: transparent;
      border: 2px solid rgba(255,255,255,0.2);
      color: var(--text-primary);
    }
    .btn-secondary:hover {
      border-color: var(--accent-cyan);
      color: var(--accent-cyan);
    }
    
    /* Results Screen */
    .results {
      text-align: center;
      padding: 50px 30px;
      display: none;
    }
    .results.show { display: block; }
    .results-emoji {
      font-size: 5rem;
      margin-bottom: 20px;
    }
    .results h2 {
      font-size: 2rem;
      margin-bottom: 10px;
    }
    .results-score {
      font-size: 4rem;
      font-weight: 800;
      background: linear-gradient(135deg, var(--accent-gold), var(--accent-red));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 20px 0;
    }
    .results-breakdown {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin: 30px 0;
    }
    .results-stat {
      text-align: center;
    }
    .results-stat-value {
      font-size: 2.5rem;
      font-weight: 700;
    }
    .results-stat-value.green { color: var(--accent-green); }
    .results-stat-value.red { color: var(--accent-red); }
    .results-stat-label {
      color: var(--text-secondary);
    }
    
    /* Timer */
    .timer {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--bg-card);
      padding: 10px 20px;
      border-radius: 10px;
      font-family: monospace;
      font-size: 1.2rem;
      border: 1px solid rgba(255,255,255,0.1);
    }
    .timer.warning { color: var(--accent-orange); border-color: var(--accent-orange); }
    .timer.danger { color: var(--accent-red); border-color: var(--accent-red); animation: pulse 0.5s infinite; }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    /* Progress Bar */
    .progress-bar {
      height: 6px;
      background: rgba(255,255,255,0.1);
      border-radius: 3px;
      margin-bottom: 30px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-purple), var(--accent-cyan));
      border-radius: 3px;
      transition: width 0.3s;
    }
    
    /* Badges earned */
    .badges-earned {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .badge-item {
      background: var(--bg-dark);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9rem;
      border: 1px solid rgba(255,215,0,0.3);
    }
    
    /* Back link */
    .back-link {
      display: inline-block;
      color: var(--text-secondary);
      text-decoration: none;
      margin-bottom: 20px;
      font-size: 0.9rem;
    }
    .back-link:hover {
      color: var(--accent-cyan);
    }
    
    /* Responsive */
    @media (max-width: 600px) {
      .header h1 { font-size: 1.8rem; }
      .stats-bar { gap: 15px; }
      .stat-value { font-size: 1.5rem; }
      .scenario-text { font-size: 1rem; }
      .timer { top: auto; bottom: 20px; right: 20px; }
    }
  </style>
</head>
<body>

  <div class="header">
    <a href="fallacies.html" class="back-link">â† Back to Fallacy Library</a>
    <h1>ğŸ§  Fallacy <span>Quiz</span></h1>
    <p>Can you spot the logical fallacy?</p>
  </div>

  <div class="container">
    
    <!-- Mode Selection -->
    <div class="mode-select">
      <button class="mode-btn active" data-mode="practice">ğŸ“š Practice</button>
      <button class="mode-btn" data-mode="timed">â±ï¸ Timed (30s)</button>
      <button class="mode-btn" data-mode="survival">ğŸ’€ Survival</button>
    </div>
    
    <!-- Stats Bar -->
    <div class="stats-bar">
      <div class="stat">
        <div class="stat-value" id="score">0</div>
        <div class="stat-label">Score</div>
      </div>
      <div class="stat">
        <div class="stat-value correct" id="correct">0</div>
        <div class="stat-label">Correct</div>
      </div>
      <div class="stat">
        <div class="stat-value wrong" id="wrong">0</div>
        <div class="stat-label">Wrong</div>
      </div>
      <div class="stat">
        <div class="stat-value streak" id="streak">0</div>
        <div class="stat-label">Streak ğŸ”¥</div>
      </div>
    </div>
    
    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-fill" id="progress" style="width: 0%"></div>
    </div>
    
    <!-- Quiz Card -->
    <div class="quiz-card" id="quizCard">
      <div class="question-header">
        <span class="question-number" id="questionNum">Question 1 of 10</span>
        <span class="difficulty easy" id="difficulty">Easy (+10)</span>
      </div>
      
      <div class="scenario">
        <div class="scenario-label">ğŸ“¢ ARGUMENT:</div>
        <div class="scenario-text" id="scenarioText">
          Loading question...
        </div>
      </div>
      
      <div class="question-prompt">What logical fallacy is being used?</div>
      
      <div class="options" id="options">
        <!-- Options populated by JS -->
      </div>
      
      <div class="explanation" id="explanation">
        <h4>ğŸ’¡ Explanation</h4>
        <p id="explanationText"></p>
        <div class="ascii-preview" id="asciiPreview"></div>
      </div>
      
      <div class="btn-row">
        <button class="btn btn-primary" id="submitBtn" disabled>Check Answer</button>
        <button class="btn btn-secondary" id="nextBtn" style="display:none">Next Question â†’</button>
      </div>
    </div>
    
    <!-- Results Screen -->
    <div class="quiz-card results" id="results">
      <div class="results-emoji" id="resultsEmoji">ğŸ†</div>
      <h2 id="resultsTitle">Quiz Complete!</h2>
      <div class="results-score" id="finalScore">0</div>
      <p>points earned</p>
      
      <div class="results-breakdown">
        <div class="results-stat">
          <div class="results-stat-value green" id="finalCorrect">0</div>
          <div class="results-stat-label">Correct</div>
        </div>
        <div class="results-stat">
          <div class="results-stat-value red" id="finalWrong">0</div>
          <div class="results-stat-label">Wrong</div>
        </div>
      </div>
      
      <div class="badges-earned" id="badges"></div>
      
      <div class="btn-row">
        <button class="btn btn-primary" onclick="startQuiz()">Play Again</button>
        <a href="fallacies.html" class="btn btn-secondary">Study Fallacies</a>
      </div>
    </div>
    
  </div>
  
  <!-- Timer (for timed mode) -->
  <div class="timer" id="timer" style="display:none">â±ï¸ <span id="timerValue">30</span>s</div>

<script>
// ========== USER SYSTEM INTEGRATION ==========
function getUsers() {
  return JSON.parse(localStorage.getItem('fallacySpotter_users') || '[]');
}

function saveUsers(users) {
  localStorage.setItem('fallacySpotter_users', JSON.stringify(users));
}

function getCurrentUser() {
  return JSON.parse(localStorage.getItem('fallacySpotter_currentUser') || 'null');
}

function setCurrentUser(user) {
  localStorage.setItem('fallacySpotter_currentUser', JSON.stringify(user));
}

function saveGameResults() {
  const user = getCurrentUser();
  if (!user) return; // Guest mode - don't save
  
  // Update user stats
  user.stats.totalScore += state.score;
  user.stats.gamesPlayed += 1;
  user.stats.correctAnswers += state.correct;
  user.stats.wrongAnswers += state.wrong;
  if (state.maxStreak > user.stats.bestStreak) {
    user.stats.bestStreak = state.maxStreak;
  }
  
  // Check for badges
  const percent = state.correct / state.questions.length;
  if (percent === 1 && !user.stats.badges.includes('ğŸ† Perfect Score')) {
    user.stats.badges.push('ğŸ† Perfect Score');
  }
  if (state.maxStreak >= 5 && !user.stats.badges.includes('ğŸ”¥ Hot Streak')) {
    user.stats.badges.push('ğŸ”¥ Hot Streak');
  }
  if (user.stats.gamesPlayed >= 10 && !user.stats.badges.includes('ğŸ® Regular Player')) {
    user.stats.badges.push('ğŸ® Regular Player');
  }
  if (user.stats.totalScore >= 1000 && !user.stats.badges.includes('ğŸ’ Diamond')) {
    user.stats.badges.push('ğŸ’ Diamond');
  }
  
  // Save to users array
  const users = getUsers();
  const userIndex = users.findIndex(u => u.id === user.id);
  if (userIndex >= 0) {
    users[userIndex] = user;
    saveUsers(users);
  }
  
  // Update current user
  setCurrentUser(user);
  
  // Save game history
  const games = JSON.parse(localStorage.getItem('fallacySpotter_games_' + user.id) || '[]');
  games.unshift({
    date: new Date().toISOString(),
    mode: state.mode,
    score: state.score,
    correct: state.correct,
    total: state.questions.length
  });
  localStorage.setItem('fallacySpotter_games_' + user.id, JSON.stringify(games.slice(0, 20)));
}

// ========== QUESTION DATABASE ==========
const questions = [
  // EASY QUESTIONS
  {
    difficulty: 'easy',
    points: 10,
    scenario: `<span class="scenario-speaker">Politician:</span> "My opponent went to rehab 20 years ago. How can you trust someone like that to lead?"`,
    answer: 'CHAR',
    options: ['CHAR', 'STRW', 'RHER', 'AUTH'],
    explanation: "This is Character Assassination - attacking the person's past to discredit their current argument, rather than addressing their policies or qualifications.",
    ascii: `   ARGUMENT           ATTACK
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Policy  â”‚   â”€â”€Xâ”€â”€â”‚ Person  â”‚
   â”‚ Points  â”‚        â”‚  PAST   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`
  },
  {
    difficulty: 'easy',
    points: 10,
    scenario: `<span class="scenario-speaker">Parent:</span> "You want to stay out until midnight? Next you'll want to stay out all night, then you'll drop out of school, then you'll end up homeless!"`,
    answer: 'SLIP',
    options: ['SLIP', 'FEAR', 'FLSD', 'STRW'],
    explanation: "This is a Slippery Slope - claiming that one small action will inevitably lead to extreme consequences without justification for each step.",
    ascii: `   SMALL ACTION
        â”‚
        â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Step 1  â”‚â”€â”€â†’ Step 2 â”€â”€â†’ Step 3
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
   ğŸ’¥ CATASTROPHE!`
  },
  {
    difficulty: 'easy',
    points: 10,
    scenario: `<span class="scenario-speaker">Debater:</span> "So you think we should reduce military spending? You basically want to leave our country defenseless!"`,
    answer: 'STRW',
    options: ['STRW', 'SLIP', 'FLSD', 'FEAR'],
    explanation: "This is a Straw Man - misrepresenting the opponent's position (reduce spending) as an extreme version (leave country defenseless) that's easier to attack.",
    ascii: `   REAL ARGUMENT        STRAW MAN
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Reduce    â”‚  â”€â”€â†’  â”‚ NO        â”‚
   â”‚ spending  â”‚       â”‚ DEFENSE!  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`
  },
  {
    difficulty: 'easy',
    points: 10,
    scenario: `<span class="scenario-speaker">Ad:</span> "9 out of 10 doctors recommend our toothpaste!" (The doctors are dentists paid by the company)`,
    answer: 'AUTH',
    options: ['AUTH', 'POPUL', 'ANEC', 'CHRY'],
    explanation: "This is Appeal to Authority - citing authorities who have conflicts of interest or aren't truly impartial experts on the matter.",
    ascii: `   ğŸ‘¨â€âš•ï¸ "DOCTORS" say...
        â”‚
        â†“
   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
   â•‘ (paid by the  â•‘
   â•‘  company)     â•‘
   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`
  },
  {
    difficulty: 'easy',
    points: 10,
    scenario: `<span class="scenario-speaker">Person A:</span> "You're late to work a lot."<br><span class="scenario-speaker">Person B:</span> "What about that time YOU were late last month?"`,
    answer: 'WHAT',
    options: ['WHAT', 'CHAR', 'RHER', 'PROJ'],
    explanation: "This is Whataboutism - deflecting criticism by pointing to someone else's behavior rather than addressing the original issue.",
    ascii: `   CRITICISM: "You did X"
         â”‚
         â†“
   "What about when
    YOU did Y??"
         â”‚
    (never addresses X)`
  },
  {
    difficulty: 'easy',
    points: 10,
    scenario: `<span class="scenario-speaker">Marketing:</span> "Over 50 million people have downloaded our app! It must be the best one!"`,
    answer: 'POPUL',
    options: ['POPUL', 'AUTH', 'BAND', 'ANEC'],
    explanation: "This is Appeal to Popularity - arguing something is good or true simply because many people use or believe it. Popularity doesn't equal quality.",
    ascii: `   ğŸ‘¤ğŸ‘¤ğŸ‘¤ğŸ‘¤ğŸ‘¤ğŸ‘¤ğŸ‘¤ğŸ‘¤ğŸ‘¤ğŸ‘¤
   "Millions use it!"
            â”‚
            â†“
   âˆ´ "Must be good!"
   (not necessarily)`
  },
  
  // MEDIUM QUESTIONS
  {
    difficulty: 'medium',
    points: 25,
    scenario: `<span class="scenario-speaker">Conspiracy theorist:</span> "You can't prove that the moon landing WASN'T faked. Therefore, it probably was faked."`,
    answer: 'IGNR',
    options: ['IGNR', 'CIRC', 'LOAD', 'STRW'],
    explanation: "This is Argument from Ignorance - claiming something is true because it hasn't been proven false. The burden of proof lies with the one making the claim.",
    ascii: `   CLAIM: "X is true"
   PROOF: â“ (none)
   DISPROOF: â“ (none)
        â”‚
        â†“
   "Therefore X is true!"
   (INVALID LOGIC)`
  },
  {
    difficulty: 'medium',
    points: 25,
    scenario: `<span class="scenario-speaker">Interviewer:</span> "Have you stopped taking bribes from lobbyists?"`,
    answer: 'LOAD',
    options: ['LOAD', 'STRW', 'WELL', 'CHAR'],
    explanation: "This is a Loaded Question - it contains a built-in assumption (that the person took bribes) that traps them regardless of how they answer.",
    ascii: `   "Have you STOPPED...?"
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â†“         â†“
  "YES"     "NO"
    â”‚         â”‚
  admits    admits
  you DID   STILL
  do it     doing`
  },
  {
    difficulty: 'medium',
    points: 25,
    scenario: `<span class="scenario-speaker">Pundit:</span> "Before you listen to the climate scientist, remember they receive government funding for their research. They have an agenda."`,
    answer: 'WELL',
    options: ['WELL', 'MOTV', 'CHAR', 'AUTH'],
    explanation: "This is Poisoning the Well - preemptively discrediting a source before they even present their argument, so anything they say is automatically suspect.",
    ascii: `   BEFORE ARGUMENT:
   "Remember they..."
        â”‚
        â†“
   â˜ ï¸ WELL POISONED â˜ ï¸
        â”‚
   Everything they say
    = automatically sus`
  },
  {
    difficulty: 'medium',
    points: 25,
    scenario: `<span class="scenario-speaker">Skeptic:</span> "My grandfather smoked two packs a day and lived to 95. Smoking can't be that dangerous."`,
    answer: 'ANEC',
    options: ['ANEC', 'CHRY', 'IGNR', 'AUTH'],
    explanation: "This is Anecdotal Evidence - using a single personal story to dismiss statistical evidence. One case doesn't disprove overall trends.",
    ascii: `   STATISTICS        ANECDOTE
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ n=10000 â”‚   vs  â”‚ "My     â”‚
   â”‚ studies â”‚       â”‚  grandpa"â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   (ignored)         (believed)`
  },
  {
    difficulty: 'medium',
    points: 25,
    scenario: `<span class="scenario-speaker">Boss:</span> "You're either a team player who works overtime, or you don't care about this company's success."`,
    answer: 'FLSD',
    options: ['FLSD', 'SLIP', 'FEAR', 'EMOT'],
    explanation: "This is a False Dilemma - presenting only two extreme options when many other possibilities exist (like being committed AND having work-life balance).",
    ascii: `   ONLY 2 OPTIONS:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Overtime â”‚ OR â”‚ Don't   â”‚
   â”‚ = Team  â”‚    â”‚  care   â”‚
   â”‚ player  â”‚    â”‚         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   
   ğŸš« HIDDEN: Many other options`
  },
  {
    difficulty: 'medium',
    points: 25,
    scenario: `<span class="scenario-speaker">Critic:</span> "I notice you drive a car to climate protests. How can anyone take your environmental concerns seriously?"`,
    answer: 'TUQU',
    options: ['TUQU', 'CHAR', 'MOTV', 'RHER'],
    explanation: "This is Tu Quoque (You Too) - dismissing an argument because the person doesn't perfectly practice what they preach. Hypocrisy doesn't make the argument false.",
    ascii: `   ARGUMENT: "Climate is important"
         â”‚
         â†“
   "But YOU drive a car!"
         â”‚
   (Doesn't address whether
    climate IS important)`
  },
  
  // HARD QUESTIONS  
  {
    difficulty: 'hard',
    points: 50,
    scenario: `<span class="scenario-speaker">Therapist:</span> "I've noticed you often accuse others of being manipulative. Let's explore whether you might sometimes use manipulation yourself without realizing it."<br><span class="scenario-speaker">Patient:</span> "See! You're manipulating me right now by saying that!"`,
    answer: 'PROJ',
    options: ['PROJ', 'GASL', 'TUQU', 'CHAR'],
    explanation: "This is Projection - accusing others of the very behavior you yourself exhibit. The patient deflects by accusing the therapist of the exact thing being discussed.",
    ascii: `   PERSON A          PERSON B
   (may be            (points out
    manipulating)      pattern)
        â”‚                  â”‚
        â””â”€â”€â”€â†’ "YOU'RE â†â”€â”€â”€â”€â”˜
             manipulating!"`
  },
  {
    difficulty: 'hard',
    points: 50,
    scenario: `<span class="scenario-speaker">Spouse A:</span> "You forgot our anniversary dinner."<br><span class="scenario-speaker">Spouse B:</span> "I never said I'd make reservations. You're always imagining things I said. Are you sure you're remembering correctly?"`,
    answer: 'GASL',
    options: ['GASL', 'PROJ', 'STRW', 'WHAT'],
    explanation: "This is Gaslighting - making someone question their own memory and perception of reality. The pattern of 'you're imagining things' is a classic sign.",
    ascii: `   REALITY           GASLIGHTER
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ They   â”‚       â”‚ "I never   â”‚
   â”‚ DID    â”‚  vs.  â”‚  said that"â”‚
   â”‚ say it â”‚       â”‚ "You're    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  imagining"â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`
  },
  {
    difficulty: 'hard',
    points: 50,
    scenario: `<span class="scenario-speaker">Debater:</span> "Studies A, B, C all show coffee is healthy. Study D shows it's harmful. But wait - Study E shows benefits, and F, G, H do too. Then there's research from Japan, Norway, Brazil..."<br>(continues rapid-fire for 2 minutes with 30+ citations)`,
    answer: 'GISH',
    options: ['GISH', 'CHRY', 'AUTH', 'SPCT'],
    explanation: "This is a Gish Gallop - overwhelming the opponent with so many arguments (valid or not) that they can't possibly address them all in the time available.",
    ascii: `   CLAIMS:
   1, 2, 3, 4, 5, 6, 7, 8...
   ...15, 16, 17, 18, 19, 20...
   ...28, 29, 30+ !!!
        â”‚
        â†“
   OPPONENT: ğŸ˜µ Can't
    possibly address all`
  },
  {
    difficulty: 'hard',
    points: 50,
    scenario: `<span class="scenario-speaker">Online user:</span> "I'm just asking questions! Can you explain why Study X used that methodology? And why did the researcher work at Company Y? And what about the funding source? I'm genuinely curious about these 47 detailed questions..."`,
    answer: 'SEAL',
    options: ['SEAL', 'LOAD', 'GISH', 'IGNR'],
    explanation: "This is Sea Lioning - appearing to engage in good faith by asking endless 'polite' questions, but actually using the tactic to exhaust and frustrate the target.",
    ascii: `   "Just asking questions!"
        â”‚
        â†“
   Q1? Q2? Q3? Q4? Q5?
   Q6? Q7? Q8? Q9? Q10?
   Q11? Q12? ... Q47?
        â”‚
        â†“
   TARGET: ğŸ˜« exhausted
   (real goal achieved)`
  },
  {
    difficulty: 'hard',
    points: 50,
    scenario: `<span class="scenario-speaker">Accused:</span> "I didn't harass anyone! (DENY) You're the one harassing ME by making these accusations! (ATTACK) I'm the real victim here - my reputation is being destroyed! (REVERSE VICTIM)"`,
    answer: 'DARV',
    options: ['DARV', 'PROJ', 'GASL', 'WHAT'],
    explanation: "This is DARVO (Deny, Attack, Reverse Victim and Offender) - a manipulation tactic where the accused denies, attacks the accuser, then claims to be the real victim.",
    ascii: `   ACCUSATION
        â”‚
        â†“
   D - "I didn't do it!"
   A - "YOU'RE attacking ME!"
   R - "I'M the real
   V    victim here!"
   O`
  },
  {
    difficulty: 'hard',
    points: 50,
    scenario: `<span class="scenario-speaker">Critic:</span> "Your proposal for healthcare reform isn't perfect - it doesn't solve every single problem. Therefore we shouldn't implement it at all."`,
    answer: 'NIRV',
    options: ['NIRV', 'FLSD', 'GOAL', 'SLIP'],
    explanation: "This is the Nirvana Fallacy (Perfect Solution Fallacy) - rejecting a solution because it's not perfect, ignoring that it might still be better than the status quo.",
    ascii: `   PROPOSAL
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Solves 80%  â”‚
   â”‚ of problems â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â†“
   "Not 100%? REJECT!"
   
   (Better than 0% ignored)`
  },
  
  // MORE QUESTIONS FOR VARIETY
  {
    difficulty: 'easy',
    points: 10,
    scenario: `<span class="scenario-speaker">Friend:</span> "Why are you worried about the environment? What about all the jobs that will be lost?"`,
    answer: 'RHER',
    options: ['RHER', 'WHAT', 'FLSD', 'FEAR'],
    explanation: "This is a Red Herring - introducing a different topic (jobs) to distract from the original concern (environment) rather than addressing it.",
    ascii: `   TOPIC: Environment
        â”‚
        â”‚   ğŸŸ "But jobs!"
        â”‚      â”‚
        â””â”€â”€â”€â”€â”€â”€â”˜
             â†“
   Original topic forgotten`
  },
  {
    difficulty: 'medium',
    points: 25,
    scenario: `<span class="scenario-speaker">Parent:</span> "We've always done Thanksgiving at our house. It's tradition. We can't possibly do it at your place this year."`,
    answer: 'TRAD',
    options: ['TRAD', 'AUTH', 'FLSD', 'POPUL'],
    explanation: "This is Appeal to Tradition - arguing something should continue simply because 'it's always been done that way,' without considering if change might be beneficial.",
    ascii: `   PAST â”€â”€â”€â”€â”€â†’ PRESENT
    â”‚            â”‚
    â”‚  "Always   â”‚
    â”‚   did it   â”‚
    â”‚   this     â”‚
    â”‚   way!"    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   âˆ´ Must continue?`
  },
  {
    difficulty: 'medium',
    points: 25,
    scenario: `<span class="scenario-speaker">Investor:</span> "I've lost money on my last 8 stock picks. The next one HAS to be a winner - I'm due for a win!"`,
    answer: 'GAMB',
    options: ['GAMB', 'ANEC', 'IGNR', 'BAND'],
    explanation: "This is the Gambler's Fallacy - believing that past random events affect future probability. Each investment decision is independent of previous outcomes.",
    ascii: `   Past: L L L L L L L L
   
   "I'm DUE for a WIN!"
        â”‚
        â†“
   WRONG: Each pick is
   independent (not "due")`
  },
  {
    difficulty: 'hard',
    points: 50,
    scenario: `<span class="scenario-speaker">Activist:</span> "I understand you disagree with my methods, but can we focus on the substance of the argument rather than how I'm presenting it?"<br><span class="scenario-speaker">Critic:</span> "I can't take your argument seriously when you're being so emotional about it."`,
    answer: 'TONE',
    options: ['TONE', 'CHAR', 'EMOT', 'DISC'],
    explanation: "This is Tone Policing - dismissing an argument based on how it's delivered rather than its content. The critic avoids the substance by focusing on presentation.",
    ascii: `   VALID ARGUMENT
        â”‚
        â†“
   "Your TONE is wrong"
        â”‚
        â†“
   Argument never
    addressed`
  },
  {
    difficulty: 'easy',
    points: 10,
    scenario: `<span class="scenario-speaker">Celebrity:</span> "As a famous actor, I can tell you that this cryptocurrency is a great investment!"`,
    answer: 'AUTH',
    options: ['AUTH', 'POPUL', 'ANEC', 'BAND'],
    explanation: "This is Appeal to Authority - citing someone as an expert when their expertise is in a completely unrelated field. Acting credentials don't qualify someone for financial advice.",
    ascii: `   TOPIC: Crypto investing
   
   ğŸ¬ ACTOR says "Buy it!"
        â”‚
        â†“
   Expertise: ACTING
   NOT: Finance âŒ`
  }
];

// ========== FALLACY DATABASE ==========
const fallacies = {
  'CHAR': { name: 'Character Assassination', category: 'Attack' },
  'SHTM': { name: 'Shooting the Messenger', category: 'Attack' },
  'WELL': { name: 'Poisoning the Well', category: 'Attack' },
  'MOTV': { name: 'Appeal to Motive', category: 'Attack' },
  'ASSOC': { name: 'Association Fallacy', category: 'Attack' },
  'RHER': { name: 'Red Herring', category: 'Misdirection' },
  'STRW': { name: 'Straw Man', category: 'Misdirection' },
  'WHAT': { name: 'Whataboutism', category: 'Misdirection' },
  'GOAL': { name: 'Moving Goalposts', category: 'Misdirection' },
  'AUTH': { name: 'Appeal to Authority', category: 'Evidence' },
  'POPUL': { name: 'Appeal to Popularity', category: 'Evidence' },
  'CHRY': { name: 'Cherry Picking', category: 'Evidence' },
  'ANEC': { name: 'Anecdotal Evidence', category: 'Evidence' },
  'TRAD': { name: 'Appeal to Tradition', category: 'Evidence' },
  'FLSD': { name: 'False Dilemma', category: 'Logic' },
  'SLIP': { name: 'Slippery Slope', category: 'Logic' },
  'CIRC': { name: 'Circular Reasoning', category: 'Logic' },
  'LOAD': { name: 'Loaded Question', category: 'Logic' },
  'IGNR': { name: 'Argument from Ignorance', category: 'Logic' },
  'GASL': { name: 'Gaslighting', category: 'Manipulation' },
  'FEAR': { name: 'Appeal to Fear', category: 'Manipulation' },
  'EMOT': { name: 'Appeal to Emotion', category: 'Manipulation' },
  'GAMB': { name: "Gambler's Fallacy", category: 'Manipulation' },
  'PROJ': { name: 'Projection', category: 'Manipulation' },
  'BAND': { name: 'Bandwagon Effect', category: 'Manipulation' },
  'TUQU': { name: 'Tu Quoque', category: 'Attack' },
  'GISH': { name: 'Gish Gallop', category: 'Debate' },
  'SEAL': { name: 'Sea Lioning', category: 'Debate' },
  'DARV': { name: 'DARVO', category: 'Manipulation' },
  'NIRV': { name: 'Nirvana Fallacy', category: 'Logic' },
  'TONE': { name: 'Tone Policing', category: 'Attack' },
  'DISC': { name: 'Discrediting Tactic', category: 'Attack' },
  'SPCT': { name: 'Appeal to Spectacle', category: 'Debate' }
};

// ========== GAME STATE ==========
let state = {
  mode: 'practice',
  currentQuestion: 0,
  questions: [],
  score: 0,
  correct: 0,
  wrong: 0,
  streak: 0,
  maxStreak: 0,
  selectedAnswer: null,
  answered: false,
  timer: null,
  timeLeft: 30
};

// ========== DOM ELEMENTS ==========
const elements = {
  score: document.getElementById('score'),
  correct: document.getElementById('correct'),
  wrong: document.getElementById('wrong'),
  streak: document.getElementById('streak'),
  progress: document.getElementById('progress'),
  questionNum: document.getElementById('questionNum'),
  difficulty: document.getElementById('difficulty'),
  scenarioText: document.getElementById('scenarioText'),
  options: document.getElementById('options'),
  explanation: document.getElementById('explanation'),
  explanationText: document.getElementById('explanationText'),
  asciiPreview: document.getElementById('asciiPreview'),
  submitBtn: document.getElementById('submitBtn'),
  nextBtn: document.getElementById('nextBtn'),
  quizCard: document.getElementById('quizCard'),
  results: document.getElementById('results'),
  timer: document.getElementById('timer'),
  timerValue: document.getElementById('timerValue')
};

// ========== FUNCTIONS ==========
function shuffle(array) {
  const arr = [...array];
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function startQuiz() {
  // Reset state
  state.currentQuestion = 0;
  state.score = 0;
  state.correct = 0;
  state.wrong = 0;
  state.streak = 0;
  state.maxStreak = 0;
  state.questions = shuffle(questions).slice(0, 10);
  
  // Reset UI
  elements.quizCard.style.display = 'block';
  elements.results.classList.remove('show');
  updateStats();
  
  loadQuestion();
}

function loadQuestion() {
  const q = state.questions[state.currentQuestion];
  state.selectedAnswer = null;
  state.answered = false;
  
  // Update header
  elements.questionNum.textContent = `Question ${state.currentQuestion + 1} of ${state.questions.length}`;
  elements.difficulty.textContent = q.difficulty.charAt(0).toUpperCase() + q.difficulty.slice(1) + ` (+${q.points})`;
  elements.difficulty.className = 'difficulty ' + q.difficulty;
  
  // Update progress
  elements.progress.style.width = ((state.currentQuestion) / state.questions.length * 100) + '%';
  
  // Update scenario
  elements.scenarioText.innerHTML = q.scenario;
  
  // Shuffle and render options
  const shuffledOptions = shuffle(q.options);
  elements.options.innerHTML = shuffledOptions.map((opt, i) => `
    <div class="option" data-answer="${opt}" onclick="selectOption(this)">
      <span class="option-letter">${String.fromCharCode(65 + i)}</span>
      <span class="option-text">${fallacies[opt].name}</span>
      <span class="option-code">${opt}</span>
    </div>
  `).join('');
  
  // Reset buttons
  elements.submitBtn.style.display = 'inline-block';
  elements.submitBtn.disabled = true;
  elements.nextBtn.style.display = 'none';
  elements.explanation.classList.remove('show');
  
  // Start timer if timed mode
  if (state.mode === 'timed') {
    startTimer();
  }
}

function selectOption(el) {
  if (state.answered) return;
  
  document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
  el.classList.add('selected');
  state.selectedAnswer = el.dataset.answer;
  elements.submitBtn.disabled = false;
}

function checkAnswer() {
  if (!state.selectedAnswer || state.answered) return;
  
  state.answered = true;
  stopTimer();
  
  const q = state.questions[state.currentQuestion];
  const isCorrect = state.selectedAnswer === q.answer;
  
  // Update stats
  if (isCorrect) {
    let points = q.points;
    if (state.streak >= 3) points = Math.floor(points * 1.5);
    state.score += points;
    state.correct++;
    state.streak++;
    if (state.streak > state.maxStreak) state.maxStreak = state.streak;
  } else {
    state.wrong++;
    state.streak = 0;
    
    // Survival mode: game over on wrong answer
    if (state.mode === 'survival') {
      setTimeout(showResults, 1500);
    }
  }
  
  updateStats();
  
  // Show correct/wrong
  document.querySelectorAll('.option').forEach(opt => {
    opt.classList.add('disabled');
    if (opt.dataset.answer === q.answer) {
      opt.classList.add('correct');
    } else if (opt.dataset.answer === state.selectedAnswer && !isCorrect) {
      opt.classList.add('wrong');
    }
  });
  
  // Show explanation
  elements.explanationText.textContent = q.explanation;
  elements.asciiPreview.textContent = q.ascii;
  elements.explanation.classList.add('show');
  
  // Switch buttons
  elements.submitBtn.style.display = 'none';
  elements.nextBtn.style.display = 'inline-block';
}

function nextQuestion() {
  state.currentQuestion++;
  
  if (state.currentQuestion >= state.questions.length) {
    showResults();
  } else {
    loadQuestion();
  }
}

function updateStats() {
  elements.score.textContent = state.score;
  elements.correct.textContent = state.correct;
  elements.wrong.textContent = state.wrong;
  elements.streak.textContent = state.streak;
}

function showResults() {
  elements.quizCard.style.display = 'none';
  elements.results.classList.add('show');
  
  document.getElementById('finalScore').textContent = state.score;
  document.getElementById('finalCorrect').textContent = state.correct;
  document.getElementById('finalWrong').textContent = state.wrong;
  
  // Determine emoji and title
  const percent = state.correct / state.questions.length;
  let emoji, title;
  if (percent === 1) {
    emoji = 'ğŸ†'; title = 'PERFECT SCORE!';
  } else if (percent >= 0.8) {
    emoji = 'ğŸŒŸ'; title = 'Excellent!';
  } else if (percent >= 0.6) {
    emoji = 'ğŸ‘'; title = 'Good Job!';
  } else if (percent >= 0.4) {
    emoji = 'ğŸ“š'; title = 'Keep Practicing!';
  } else {
    emoji = 'ğŸ’ª'; title = 'Room to Improve';
  }
  
  document.getElementById('resultsEmoji').textContent = emoji;
  document.getElementById('resultsTitle').textContent = title;
  
  // Badges
  const badges = [];
  if (percent === 1) badges.push('ğŸ† Perfect Score');
  if (state.maxStreak >= 5) badges.push('ğŸ”¥ 5+ Streak');
  if (state.maxStreak >= 3) badges.push('âš¡ Hot Streak');
  if (state.correct >= 8) badges.push('ğŸ¯ Sharp Eye');
  
  document.getElementById('badges').innerHTML = badges.map(b => 
    `<span class="badge-item">${b}</span>`
  ).join('');
  
  // Save game results if logged in
  saveGameResults();
}

// Timer functions
function startTimer() {
  state.timeLeft = 30;
  elements.timer.style.display = 'block';
  elements.timerValue.textContent = state.timeLeft;
  elements.timer.className = 'timer';
  
  state.timer = setInterval(() => {
    state.timeLeft--;
    elements.timerValue.textContent = state.timeLeft;
    
    if (state.timeLeft <= 10) {
      elements.timer.className = 'timer warning';
    }
    if (state.timeLeft <= 5) {
      elements.timer.className = 'timer danger';
    }
    if (state.timeLeft <= 0) {
      // Time's up - auto wrong
      stopTimer();
      if (!state.answered) {
        state.answered = true;
        state.wrong++;
        state.streak = 0;
        updateStats();
        
        const q = state.questions[state.currentQuestion];
        document.querySelectorAll('.option').forEach(opt => {
          opt.classList.add('disabled');
          if (opt.dataset.answer === q.answer) {
            opt.classList.add('correct');
          }
        });
        
        elements.explanationText.textContent = "Time's up! " + q.explanation;
        elements.asciiPreview.textContent = q.ascii;
        elements.explanation.classList.add('show');
        elements.submitBtn.style.display = 'none';
        elements.nextBtn.style.display = 'inline-block';
      }
    }
  }, 1000);
}

function stopTimer() {
  if (state.timer) {
    clearInterval(state.timer);
    state.timer = null;
  }
  elements.timer.style.display = 'none';
}

// Mode selection
document.querySelectorAll('.mode-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    state.mode = btn.dataset.mode;
    startQuiz();
  });
});

// Button handlers
elements.submitBtn.addEventListener('click', checkAnswer);
elements.nextBtn.addEventListener('click', nextQuestion);

// Start quiz on load
startQuiz();
</script>

</body>
</html>
